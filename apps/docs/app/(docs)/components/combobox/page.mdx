import { Cards } from "@/components/cards";
import { Demo } from "@/components/demo";
import { PropsTable } from "@/components/props-table";

# Combobox

Multi-purpose combobox widget to allow selection from a dynamic set of options.

<Demo component="combobox/usage" />

## Guide

### Structure

Combobox works with lists of items provided via the `items` prop. The basic structure includes the main component provider, a trigger, and a content.

- `Combobox`
- `ComboboxTrigger`
- `ComboboxContent`

Items can be an array of strings or it can be an array of objects.

The trigger can be provided a `placeholder` to display in case no values have been selected yet.

<Demo component="combobox/overview/usage" />

### Content

By default content popover will be populated using the `items` prop but we can provide our own children to customize how items are rendered.

Items will need to be rendered inside a `ComboboxScrollArea` component.

#### Multi-select

We can render multi-select items using `ComboboxCheckboxItem`.

<Demo component="combobox/overview/content-checkbox-usage" meta="{18-24}" />

#### Single-select

We can render single-select items using `ComboboxRadioItem`.

<Demo component="combobox/overview/content-radio-usage" meta="{20,22}" />

### Input

Notice that keyboard interactions inside the content popover do not work in the previous demos. This is because we need to render the `ComboboxInput` component that handles keyboard interaction and also filtering of visible items.

Additionally we need to add an `onInputValueChange` prop to the main `Combobox` component to manually handle the actual filtering of items.

<Demo component="combobox/overview/input-usage" meta="{16,21-27,31}" />

How you store the items and handle filtering is up to you. In this demo we've stored the items in a state and update the state in the `onInputValueChange` handler. Alternatively you could store the input value in a state and filter the items based on that on each render.

<Demo
  component="combobox/overview/input-controlled-usage"
  meta="{16-19,23,25}"
/>

### Selection

Pressing enter or clicking items will not do anything in previous demos. For that we need to add the `isItemSelected` and `onItemSelect` props to the main `Combobox` component.

#### Multi-select

<Demo component="combobox/overview/value-checkbox-usage" meta="{17,29-36}" />

#### Single-select

<Demo component="combobox/overview/value-radio-usage" meta="{17,29-32}" />

### Empty

Finally we can render an empty state in the content using the `ComboboxEmpty` component.

<Demo component="combobox/overview/empty-usage" meta="{39}" />

## Documentation

### Anatomy

```tsx
import {
  Combobox,
  ComboboxCheckboxItem,
  ComboboxContent,
  ComboboxEmpty,
  ComboboxFooter,
  ComboboxGroup,
  ComboboxInput,
  ComboboxItem,
  ComboboxLabel,
  ComboboxRadioItem,
  ComboboxScrollArea,
  ComboboxSeparator,
  ComboboxTrigger,
  ComboboxVirtualized,
} from "@optiaxiom/react";

export default () => (
  <Combobox>
    <ComboboxTrigger />

    <ComboboxContent>
      <ComboboxInput />

      <ComboboxScrollArea>
        <ComboboxItem />
        <ComboboxCheckboxItem />
        <ComboboxRadioItem />

        <ComboboxGroup>
          <ComboboxLabel />
          <ComboboxItem />
          <ComboboxCheckboxItem />
          <ComboboxRadioItem />
        </ComboboxGroup>

        <ComboboxVirtualized>
          <ComboboxItem />
          <ComboboxCheckboxItem />
          <ComboboxRadioItem />
        </ComboboxVirtualized>

        <ComboboxEmpty />
        <ComboboxSeparator />
      </ComboboxScrollArea>

      <ComboboxFooter />
    </ComboboxContent>
  </Combobox>
);
```

### Data

Use the `items` prop to pass the collection of data to `Combobox`. Items can be an array of primitive types such as strings or it can be an array of objects.

In case item is an object you need to pass an additional `itemToLabel` prop for `Combobox` to work.

<Demo component="combobox/complex-usage" meta={{ "App.tsx": "{24}" }} />

### Filtering

Use the `onInputValueChange` handler to handle filtering your list of items as the user is typing.

<Demo component="combobox/complex-usage" meta={{ "App.tsx": "{25-33}" }} />

### Controlled

We can only use `Combobox` in a controlled mode and using the following props:

- `isItemSelected`: Return true if an item should be marked as selected where the item and the index are passed as parameters.
- `onItemSelect`: Handler invoked when user selects an item with the item as the only parameter.

Developers are expected to manually track the selection on their side since items inside a combobox can represent values or actions.

<Demo
  component="combobox/controlled-usage"
  meta={{ "App.tsx": "{18,33-34}" }}
/>

### Disabled

Use the optional `isItemDisabled` prop to configure which items should be disabled. The callback is passed the item and the index number as arguments and expects a boolean result.

<Demo
  component="combobox/complex-usage"
  meta={{ "App.tsx": "{22}", "data.ts": "{3}" }}
/>

### Creatable

We can combine filtering and controlled usage to build **creatable** comboboxes by allowing the user to add new entries on the fly.

<Demo component="combobox/creatable-usage" />

### Trigger

By default we use the `Button` component for the combobox trigger which accepts all of the existing button props.

### Item

The `ComboboxCheckboxItem` component accepts `icon`, `addonBefore`, `addonAfter`, and `description` props for additional content inside the items.

<Demo component="combobox/complex-usage" meta={{ "App.tsx": "{53-58}" }} />

### Empty

Use the `ComboboxEmpty` component when there are no available items or suggestions.

<Demo component="combobox/complex-usage" meta={{ "App.tsx": "66" }} />

### Loading

Use the `loading` prop on `ComboboxScrollArea` to show a loading spinner if the initial data for the combobox has not loaded yet.

<Demo component="combobox/loading-usage" meta={{ "App.tsx": "{42}" }} />

### Virtualized

We can use `ComboboxVirtualized` component to improve performance when rendering a large number of items inside the combobox.

<Demo component="combobox/virtualized-usage" meta="{34-40}" />

### Related

<Cards items={["DropdownMenu", "Select"]} />

## Props

### Combobox

<PropsTable component="Combobox" />
### ComboboxTrigger
<PropsTable component="ComboboxTrigger" />
### ComboboxContent
<PropsTable component="ComboboxContent" />
### ComboboxInput
<PropsTable component="ComboboxInput" />
### ComboboxScrollArea
<PropsTable component="ComboboxScrollArea" />
### ComboboxVirtualized
<PropsTable component="ComboboxVirtualized" />
### ComboboxItem
<PropsTable component="ComboboxItem" />
### ComboboxCheckboxItem
<PropsTable component="ComboboxCheckboxItem" />
### ComboboxRadioItem
<PropsTable component="ComboboxRadioItem" />
### ComboboxGroup
<PropsTable component="ComboboxGroup" />
### ComboboxLabel
<PropsTable component="ComboboxLabel" />
### ComboboxSeparator
<PropsTable component="ComboboxSeparator" />
### ComboboxEmpty
<PropsTable component="ComboboxEmpty" />
### ComboboxFooter
<PropsTable component="ComboboxFooter" />

## Changelog

### 0.4.0

- Added component
