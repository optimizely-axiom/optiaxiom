import { Cards, Demo, Links, PropsTable } from "@/components";
import { Flex, Kbd } from "@optiaxiom/react";

# Select

Single select combobox widget to allow selection from a fixed set of options.

<Links component="select" />

## Documentation

### Usage

<Demo component="select/field-usage" />

### Anatomy

```tsx
import { Select, SelectContent, SelectTrigger } from "@optiaxiom/react";

export default () => (
  <Select>
    <SelectTrigger />
    <SelectContent />
  </Select>
);
```

### Structure

Select works with lists of items provided via the `options` prop. The basic structure includes the main component provider, a trigger, and the content.

- `Select`
- `SelectTrigger`
- `SelectContent`

Items must be an array of objects of `SelectOption` type and at minimum must contain the following two properties:

- `label`
- `value`

The trigger can be provided a `placeholder` to display in case no values have been selected yet (or if an empty value is selected).

<Demo component="select/usage" />

### Content

Select options use the `label` property as the display text. We can add the `addon` and `description` properties to show additional content inside the items.

<Demo component="select/content-usage" />

### Controlled

Use the `value` and `defaultValue` props to toggle between controlled and uncontrolled usage. And combine it with `onValueChange` / `onChange` to listen for changes to the state.

Using `onValueChange`:

<Demo
  component="select/controlled-usage"
  meta="/onValueChange={setValue}/ /value={value}/"
/>

Using `onChange`:

<Demo component="select/controlled-onchange-usage" meta="{21,26,28}" />

### Form usage

Use the `name` prop (and optionally `ref` and `onChange`) to integrate `Select` with forms.

<Demo component="select/form-usage" meta='/name="priority"/ {29}' />

### Disabled state

Enable the `disabled` prop on `Select` to toggle the disabled state of the input field.

<Demo component="select/disabled-usage" meta="/disabled={disabled}/" />

### Trigger

By default we use the `Button` component for the menu trigger which accepts all of the existing button props.

We can also use `asChild` to render a completely different component. We provide a few built-in buttons:

- `AngleMenuButton` (default)
- `LabelMenuButton`

<Demo component="select/trigger-usage" />

### Group

We can group options using the `group` property.

<Demo component="select/group-usage" />

### Related

<Cards items={["Menu", "DropdownMenu"]} />

## Props

### Select

<PropsTable component="Select" />

### SelectTrigger

<PropsTable component="SelectTrigger" />

### SelectContent

<PropsTable component="SelectContent" />

## Accessibility

### Keyboard interactions

| Key                                                                            | Description                                                                                                                                                               |
| :----------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| <Flex flexDirection="row" gap="8"><Kbd>Space</Kbd> <Kbd>Enter</Kbd></Flex>     | When focus is on `SelectTrigger`, opens the menu and focuses the first item (or selected item). When focus is on an item, activates the focused item and closes the menu. |
| <Kbd>ArrowDown</Kbd>                                                           | When focus is on `SelectTrigger`, opens the menu and focuses the first item (or selected item). When focus is on an item, moves focus to the next item.                   |
| <Kbd>ArrowUp</Kbd>                                                             | When focus is on `SelectTrigger`, opens the menu and focuses the last item (or selected item). When focus is on an item, moves focus to the previous item.                |
| <Flex flexDirection="row" gap="8"><Kbd>PageUp</Kbd> <Kbd>PageDown</Kbd></Flex> | Moves focus up/down by 10 items at a time.                                                                                                                                |
| <Flex flexDirection="row" gap="8"><Kbd>Home</Kbd> <Kbd>End</Kbd></Flex>        | Moves focus to the first/last item.                                                                                                                                       |
| <Kbd>Esc</Kbd>                                                                 | Closes the menu and moves focus back to `SelectTrigger`.                                                                                                                  |

## Changelog

### 1.4.0

- Moved component out of **Alpha**.

  ```jsx
  // Before
  import {
    Select,
    SelectContent,
    SelectTrigger,
  } from "@optiaxiom/react/unstable";

  // After
  import { Select, SelectContent, SelectTrigger } from "@optiaxiom/react";
  ```

### 1.3.0

- Renamed `items` prop to `options`:

  ```jsx
  // Before
  <Select items={[]} />

  // After
  <Select options={[]} />
  ```

- Removed `itemToLabel`, `itemToValue`, and `isItemDisabled` props in favor of fixed properties on options:

  ```jsx
  // Before
  <Select
    items={[
      {
        id: "1",
        name: "Sample",
      },
    ]}
    itemToLabel={(item) => item.name}
    itemToValue={(item) => item.id}
  />

  // After
  <Select
    options={[
      {
        label: "Sample",
        value: "1",
      },
    ]}
  />
  ```

### 0.2.0

- Added component
